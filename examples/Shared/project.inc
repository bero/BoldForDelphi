(*****************************************************)
(*                                                   *)
(*  Bold for Delphi Stub File                        *)
(*                                                   *)
(*  Autogenerated file for method implementations    *)
(*                                                   *)
(*****************************************************)

//
{$INCLUDE DemoClasses_Interface.inc}

var
  FProjectCounter: Integer = 0;

class procedure TProject.InitializeCounter(ASystem: TBoldSystem);
var
  Projects: TBoldObjectList;
  i, Num, MaxNum: Integer;
  ProjName: string;
begin
  MaxNum := 0;
  Projects := ASystem.Classes[ASystem.BoldSystemTypeInfo.ClassTypeInfoByExpressionName['Project'].TopSortedIndex];
  for i := 0 to Projects.Count - 1 do
  begin
    ProjName := TProject(Projects[i]).Name;
    if ProjName.StartsWith('Project') then
    begin
      if TryStrToInt(Copy(ProjName, 8, MaxInt), Num) then
        if Num > MaxNum then
          MaxNum := Num;
    end;
  end;
  FProjectCounter := MaxNum;
end;

procedure TProject.CompleteCreate;
begin
  inherited;
  Inc(FProjectCounter);
  Name := 'Project' + IntToStr(FProjectCounter);
  StartDate := Date;
  EndDate := StartDate + 7;
end;
