<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Buildings &amp; Owners - Bold for Delphi Examples</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="page.css">
</head>
<body>
  <div class="layout">
    <aside class="sidebar">
      <div class="sidebar-header">
        <a href="index.html" class="logo-link">
          <div class="logo">
            <span class="logo-bold">Bold</span>
            <span class="logo-sub">for Delphi</span>
          </div>
        </a>
      </div>
      <nav class="nav">
        <div class="nav-section">
          <h3 class="nav-title">Simple Examples</h3>
          <details class="nav-group"><summary>GUI Controls</summary>
            <ul>
              <li><a href="boldimage.html">BoldImage</a></li>
              <li><a href="combobox.html">ComboBox</a></li>
              <li><a href="multilanguage.html">MultiLanguage</a></li>
              <li><a href="renderers.html">Renderers</a></li>
              <li><a href="treeview.html">TreeView</a></li>
            </ul>
          </details>
          <details class="nav-group"><summary>ObjectSpace</summary>
            <ul>
              <li><a href="association_class.html">Association Class</a></li>
              <li><a href="constraints.html">Constraints</a></li>
              <li><a href="custom_attributes.html">Custom Attributes</a></li>
              <li><a href="derived_attributes.html">Derived Attributes</a></li>
              <li><a href="reverse_derived_attributes.html">Reverse Derived</a></li>
              <li><a href="derived_handle.html">Derived Handle</a></li>
              <li><a href="ocl_variables.html">OCL Variables</a></li>
              <li><a href="optimistic_locking.html">Optimistic Locking</a></li>
              <li><a href="masterdetail.html">Master Detail</a></li>
              <li><a href="sql_handle.html">SQL Handle</a></li>
              <li><a href="transactions.html">Transactions</a></li>
            </ul>
          </details>
          <details class="nav-group"><summary>Persistence</summary>
            <ul>
              <li><a href="createdatabase.html">Create Database</a></li>
              <li><a href="logbridge.html">LogBridge</a></li>
              </ul>
          </details>
        </div>
        <div class="nav-section">
          <h3 class="nav-title">Demo Examples</h3>
          <ul>
            <li><a href="buildings_owners.html" class="active">Buildings &amp; Owners</a></li>
            <li><a href="conway.html">Conway's Game of Life</a></li>
            <li><a href="model_evolution.html">Model Evolution</a></li>
            <li><a href="product_structure.html">Product Structure</a></li>
          </ul>
        </div>
      </nav>
    </aside>

    <main class="main">
      <header class="header">
        <p class="breadcrumb"><a href="index.html">Examples</a> / Demo</p>
        <h1>Buildings &amp; Owners</h1>
        <p class="subtitle">Classic Bold demo with full CRUD operations</p>
      </header>

      <section class="content">
        <div class="card">
          <h2>Overview</h2>
          <p>
            This classic example demonstrates several key Bold features including multi-multi relations,
            class inheritance, framework method overrides, renderers, and Bold-aware components.
          </p>
          <p>
            The application is based on the tutorial guide and serves as an excellent starting point
            for learning Bold development patterns.
          </p>
        </div>

        <div class="card">
          <h2>Class Model</h2>
          <p>The domain model shows Person, Building, and ResidentialBuilding with their relationships:</p>
          <div class="diagram">
            <svg viewBox="0 0 600 320" fill="none" xmlns="http://www.w3.org/2000/svg">
              <!-- Background -->
              <rect width="600" height="320" fill="#1e293b"/>

              <!-- Person class -->
              <rect x="30" y="30" width="160" height="130" rx="4" fill="#334155" stroke="#3b82f6" stroke-width="2"/>
              <rect x="30" y="30" width="160" height="28" rx="4" fill="#3b82f6"/>
              <text x="110" y="50" fill="white" font-size="12" font-weight="bold" text-anchor="middle">Person</text>
              <line x1="30" y1="58" x2="190" y2="58" stroke="#475569"/>
              <text x="40" y="78" fill="#94a3b8" font-size="10">firstName: String</text>
              <text x="40" y="94" fill="#94a3b8" font-size="10">lastName: String</text>
              <text x="40" y="110" fill="#94a3b8" font-size="10">assets: Currency</text>
              <line x1="30" y1="118" x2="190" y2="118" stroke="#475569" stroke-dasharray="4,2"/>
              <text x="40" y="138" fill="#22c55e" font-size="10" font-style="italic">/fullName: String</text>
              <text x="40" y="152" fill="#22c55e" font-size="10" font-style="italic">/isRich: Boolean</text>

              <!-- Building class -->
              <rect x="280" y="30" width="160" height="110" rx="4" fill="#334155" stroke="#3b82f6" stroke-width="2"/>
              <rect x="280" y="30" width="160" height="28" rx="4" fill="#3b82f6"/>
              <text x="360" y="50" fill="white" font-size="12" font-weight="bold" text-anchor="middle">Building</text>
              <line x1="280" y1="58" x2="440" y2="58" stroke="#475569"/>
              <text x="290" y="78" fill="#94a3b8" font-size="10">address: String</text>
              <text x="290" y="94" fill="#94a3b8" font-size="10">zipCode: String</text>
              <text x="290" y="110" fill="#94a3b8" font-size="10">city: String</text>
              <text x="290" y="126" fill="#94a3b8" font-size="10">builtYear: Integer</text>

              <!-- ResidentialBuilding class -->
              <rect x="280" y="190" width="160" height="110" rx="4" fill="#334155" stroke="#f59e0b" stroke-width="2"/>
              <rect x="280" y="190" width="160" height="28" rx="4" fill="#f59e0b"/>
              <text x="360" y="210" fill="white" font-size="11" font-weight="bold" text-anchor="middle">ResidentialBuilding</text>
              <line x1="280" y1="218" x2="440" y2="218" stroke="#475569"/>
              <text x="290" y="238" fill="#94a3b8" font-size="10">apartments: Integer</text>
              <text x="290" y="254" fill="#94a3b8" font-size="10">monthlyRent: Currency</text>
              <line x1="280" y1="262" x2="440" y2="262" stroke="#475569" stroke-dasharray="4,2"/>
              <text x="290" y="282" fill="#22c55e" font-size="10" font-style="italic">/rentPerResident</text>

              <!-- Inheritance arrow -->
              <line x1="360" y1="190" x2="360" y2="150" stroke="#94a3b8" stroke-width="2"/>
              <polygon points="360,140 352,155 368,155" fill="#1e293b" stroke="#94a3b8" stroke-width="2"/>

              <!-- owners relationship -->
              <line x1="190" y1="70" x2="280" y2="70" stroke="#94a3b8" stroke-width="2"/>
              <text x="235" y="60" fill="#e2e8f0" font-size="10" text-anchor="middle">*</text>
              <text x="200" y="60" fill="#e2e8f0" font-size="10">*</text>
              <text x="200" y="85" fill="#64748b" font-size="9">owners</text>
              <text x="255" y="85" fill="#64748b" font-size="9">buildings</text>

              <!-- residents relationship -->
              <path d="M190 120 L230 120 L230 245 L280 245" stroke="#22c55e" stroke-width="2" fill="none"/>
              <text x="195" y="115" fill="#e2e8f0" font-size="10">*</text>
              <text x="260" y="240" fill="#e2e8f0" font-size="10">*</text>
              <text x="200" y="135" fill="#22c55e" font-size="9">residents</text>
              <text x="243" y="260" fill="#22c55e" font-size="9">home</text>

              <!-- Legend -->
              <rect x="470" y="30" width="115" height="90" rx="4" fill="#0f172a" opacity="0.9"/>
              <text x="480" y="48" fill="#94a3b8" font-size="10" font-weight="bold">Legend</text>
              <line x1="480" y1="60" x2="510" y2="60" stroke="#94a3b8" stroke-width="2"/>
              <text x="515" y="64" fill="#94a3b8" font-size="9">Association</text>
              <polygon points="495,75 487,85 503,85" fill="#1e293b" stroke="#94a3b8" stroke-width="1.5"/>
              <text x="515" y="84" fill="#94a3b8" font-size="9">Inheritance</text>
              <text x="480" y="104" fill="#22c55e" font-size="9" font-style="italic">/derived</text>
              <text x="515" y="104" fill="#94a3b8" font-size="9">Calculated</text>

              <!-- Rent flow annotation -->
              <rect x="470" y="200" width="115" height="55" rx="4" fill="#14532d" stroke="#22c55e" stroke-width="1"/>
              <text x="527" y="218" fill="#22c55e" font-size="9" font-weight="bold" text-anchor="middle">Charge Rent</text>
              <text x="527" y="232" fill="#86efac" font-size="8" text-anchor="middle">residents.assets</text>
              <text x="527" y="244" fill="#86efac" font-size="8" text-anchor="middle">â†’ owners.assets</text>
            </svg>
          </div>
          <style>
            .diagram { margin: 1.5rem 0; border-radius: 0.5rem; overflow: hidden; }
            .diagram svg { width: 100%; height: auto; display: block; }
          </style>
        </div>

        <div class="card">
          <h2>Features Demonstrated</h2>
          <div class="feature-grid">
            <div class="feature">
              <h4>Multi-Multi Relations</h4>
              <p>Persons can own multiple buildings, and buildings can have multiple owners</p>
            </div>
            <div class="feature">
              <h4>Class Inheritance</h4>
              <p>ResidentialBuilding extends Building with additional properties</p>
            </div>
            <div class="feature">
              <h4>CompleteCreate Override</h4>
              <p>Auto-initialization of new objects with default values</p>
            </div>
            <div class="feature">
              <h4>Renderers</h4>
              <p>Custom display logic for Rich checkbox, colored assets, and rent highlighting</p>
            </div>
            <div class="feature">
              <h4>Drag &amp; Drop</h4>
              <p>Assign owners and residents by dragging persons to buildings</p>
            </div>
            <div class="feature">
              <h4>Undo/Redo</h4>
              <p>Full undo/redo support with checkpoint capability</p>
            </div>
          </div>
        </div>

        <div class="card">
          <h2>How to Run</h2>
          <ol>
            <li><strong>Create persons</strong> - Right-click the person grid and choose New. Default values are auto-assigned via <code>CompleteCreate</code></li>
            <li><strong>Create buildings</strong> - Add buildings in the Buildings grid. Addresses with "Rose", "Bold", or "Select" display in different colors</li>
            <li><strong>Assign owners</strong> - Drag persons from the grid to the owners listbox</li>
            <li><strong>Create residential buildings</strong> - These have rent properties. High rent (&gt;1500) shows in red on silver background</li>
            <li><strong>Add residents</strong> - Drag persons to the residents listbox and observe rent calculations</li>
            <li><strong>Charge rent</strong> - Click the button to transfer rent from residents to owners. Residents with insufficient assets are evicted</li>
            <li><strong>Try Undo/Redo</strong> - Make changes and use Undo/Redo. Set checkpoints to control undo depth</li>
          </ol>
        </div>

        <div class="card">
          <h2>Key Implementation Details</h2>

          <h3>CompleteCreate Method</h3>
          <p>
            The <code>CompleteCreate</code> framework method executes when creating new instances.
            See implementation files: <code>Person.inc</code>, <code>Building.inc</code>, <code>ResidentialBuilding.inc</code>
          </p>

          <h3>Renderers Used</h3>
          <ul>
            <li><code>IsRichRenderer</code> - Controls the Rich checkbox (assets &gt; 10,000)</li>
            <li><code>NegativeRedRenderer</code> - Shows negative assets in red, positive in blue</li>
            <li><code>bsrAddress</code> - Color-codes addresses based on keywords</li>
            <li><code>HighRentRenderer</code> - Highlights high rent values</li>
            <li><code>bsrRentPerResident</code> - Calculates and displays rent per resident</li>
          </ul>
        </div>

        <div class="card">
          <h2>Related Examples</h2>
          <div class="related-grid">
            <a href="renderers.html" class="related-item">
              <strong>Renderers</strong>
              <span>More renderer examples</span>
            </a>
            <a href="derived_attributes.html" class="related-item">
              <strong>Derived Attributes</strong>
              <span>OCL-based calculations</span>
            </a>
          </div>
        </div>

        <div class="card">
          <h2>Project Files</h2>
          <div class="file-link">
            <a href="../../examples/Compound/Building/BldOwn.dpr">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
              </svg>
              <span>BldOwn.dpr</span>
            </a>
          </div>
          <p class="hint">Location: <code>examples\Compound\Building\</code></p>
        </div>
      </section>

      <footer class="footer">
      </footer>
    </main>
  </div>
</body>
</html>
